<section class="sidebar" ng-controller="RoomCtrl">
  <div>Lobby</div>

  <ul class="room-list">
    <li class="room"
        ng-repeat="room in rooms | filter:{open:true}"
        ng-class="{'active': room.id === currentRoom}">
      <button type="button"
          class="room__join-btn"
          ng-click="showRoom(room.organization.parameterized_name + '/' + room.parameterized_name)">
        <i class="fa fa-fw fa-comments room__type-icon"></i>
        <span ng-bind="room.name"></span>
      </button>

      <button type="button"
          class="room__close-btn"
          ng-click="leaveRoom(room.organization.parameterized_name + '/' + room.parameterized_name)">
        <i class="fa fa-fw fa-times"></i>
      </button>
    </li>
  </ul>

  <ul class="room-list">
    <li class="room"
        ng-repeat="query in queries | filter:{open:true}"
        ng-click="show(query.id)"
        ng-class="{'query-online': query.online,
                   'query-offline': !query.online,
                   'active': query.id === currentRoom}">
      <button type="button"
          class="room__join-btn"
          ng-click="showRoom('private/' + query.id)">
        <i class="fa fa-fw room__type-icon"
            ng-class="{'fa-circle': query.online,
                       'fa-circle-o': !query.online}"></i>
        <span ng-bind="query.name"></span>
      </button>

      <button type="button"
          class="room__close-btn"
          ng-click="leaveRoom('private/' + query.id)">
        <i class="fa fa-fw fa-times"></i>
      </button>
    </li>
  </ul>
</section>

<section class="chat">

  <div ng-controller="MessagesCtrl" class="message-windows">
    <div class="message-window"
        ng-controller="MessageWindowCtrl"
        ng-class="{'is-loading': isLoading}"
        ng-repeat="room in rooms"
        ng-init="room = room"
        ng-show="room == currentRoom">
      <div ng-include="'views/message-window.html'"></div>
    </div>
  </div>

  <div class="chat-bar">
    <form ng-submit="send(message)">
      <input type="text" ng-model="message">
      <button type="submit" class="btn">Send</button>
    </form>
  </div>
</section>

<aside class="chat-context" ng="ChatContextCtrl">

</aside>
